<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="product">

	<insert id="addproduct" parameterType="productvo">
	<![CDATA[
	insert into product(name, price, image, summary_desc, detail_desc, manufacturing_date, display,
	material, provider, manufacturer, origin) values(#{name }, #{price },#{image },#{summary_desc },#{detail_desc }, now()
	,#{display }, #{material },#{provider }, #{manufacturer },#{origin });
	]]>
	<selectKey keyProperty="product_no" resultType="long" order="AFTER">
	<![CDATA[
	select last_insert_id()
	]]>
	
	</selectKey>
	</insert>
	
	<insert id="addProductDetail" parameterType="productdetailvo">
	<![CDATA[
		insert into pd_detail(pd_detail_no,product_no,option,inventory) 
		values(#{pd_detail_no },#{product_no },#{option },#{inventory });
	]]>
	</insert>
	
	<select id="maxProductDetailNo" parameterType="productvo" resultType="long">
		select max(pd_detail_no) from pd_detail where product_no=#{product_no }; 
	</select>
	
</mapper>
